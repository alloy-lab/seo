# Lefthook configuration for SEO package
# Runs typecheck, linting, and formatting checks before commits

pre-commit:
  parallel: true
  commands:
    eslint:
      glob: '*.{ts,tsx,js,jsx}'
      run: pnpm lint
      fail_text: '❌ ESLint errors found. Fix before committing.'
    prettier:
      glob: '*.{ts,tsx,js,jsx,json,md,yml,yaml}'
      run: pnpm format:check
      fail_text: '❌ Code formatting issues found. Run "pnpm format" to fix them.'
    typecheck:
      run: pnpm typecheck
      fail_text: '❌ TypeScript errors found.'
    typecheck-test:
      run: pnpm typecheck:test
      fail_text: '❌ TypeScript test errors found.'

pre-push:
  parallel: true
  commands:
    typecheck-all:
      run: pnpm typecheck
      fail_text: '❌ TypeScript errors. Push aborted.'
    typecheck-test-all:
      run: pnpm typecheck:test
      fail_text: '❌ TypeScript test errors. Push aborted.'
    test:
      run: pnpm test:run
      fail_text: '❌ Tests failed. Fix and try again.'
    build:
      run: pnpm build
      fail_text: '❌ Build failed. Fix compilation errors.'
    commitlint:
      run: pnpm commitlint --from HEAD~1 --to HEAD --verbose
      fail_text: '❌ Commit messages do not follow conventional commit format.'

# Skip hooks for certain file patterns
skip_output:
  - 'node_modules/**'
  - 'dist/**'
  - 'build/**'
  - 'coverage/**'
  - 'test-results/**'
  - '*.log'
  - '*.lock'
  - '*.md'
  - '*.yml'
  - '*.yaml'

# Colors for better output
colors:
  red: true
  green: true
  yellow: true
  blue: true
  magenta: true
  cyan: true
  white: true
